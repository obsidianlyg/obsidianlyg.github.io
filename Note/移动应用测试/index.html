<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="L小悠的日常L" href="https://obsidianlyg.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="L小悠的日常L" href="https://obsidianlyg.github.io/atom.xml"><link rel="alternate" type="application/json" title="L小悠的日常L" href="https://obsidianlyg.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Python"><link rel="canonical" href="https://obsidianlyg.github.io/Note/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95/"><title>移动应用测试 | Obsidianlyg's Blog = L 小悠的日常 L = obsidianlyg</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">移动应用测试</h1><div class="meta"><span class="item" title="创建时间：2022-01-21 00:14:39"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-01-21T00:14:39+08:00">2022-01-21</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>8.3k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>8 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Obsidianlyg's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://t3.picb.cc/2023/06/15/IXDO3T.jpg"></li><li class="item" data-background-image="https://t3.picb.cc/2023/06/15/IXzUUt.jpg"></li><li class="item" data-background-image="https://t3.picb.cc/2023/06/15/IXzdG1.jpg"></li><li class="item" data-background-image="https://t3.picb.cc/2023/06/15/IXzEPJ.jpg"></li><li class="item" data-background-image="https://t3.picb.cc/2023/06/15/IXDMC6.jpg"></li><li class="item" data-background-image="https://t3.picb.cc/2023/06/15/IXDrHe.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://obsidianlyg.github.io/Note/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="obsidianlyg"><meta itemprop="description" content="obsidianlyg, 最好的生活是：时光，浓淡相宜，人心，远近相安"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="L 小悠的日常 L"></span><div class="body md" itemprop="articleBody"><h1 id="移动应用测试"><a class="anchor" href="#移动应用测试">#</a> 移动应用测试</h1><h2 id="查看包名"><a class="anchor" href="#查看包名">#</a> 查看包名：</h2><ul><li><p>方案一：如果你应用已经安装在手机上了，可以直接打开手机上该应用，进入到你要操作的界面，然后执行 (<strong>注：一定要用 cmd 运行，powershell 会报参数不正确</strong>):</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell dumpsys activity recents <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">"intent=&#123;"</span></pre></td></tr></table></figure><p>会出现如下信息：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.<span class="token environment constant">HOME</span><span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10000000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.android.launcher3/.Launcher<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10000000 <span class="token assign-left variable">pkg</span><span class="token operator">=</span>tv.danmaku.bili <span class="token assign-left variable">cmp</span><span class="token operator">=</span>tv.danmaku.bili/.MainActivityV2<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10200000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.android.flysilkworm/.app.activity.FrameworkActivity<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10200000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.android.settings/.Settings<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10800000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>io.appium.settings/.Settings<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>C:<span class="token punctuation">\</span>WINDOWS<span class="token punctuation">\</span>System3<span class="token operator"><span class="token file-descriptor important">2</span>></span>adb shell dumpsys activity recents <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">"intent=&#123;"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10200000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>tv.danmaku.bili/.MainActivityV2<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.<span class="token environment constant">HOME</span><span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10000000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.android.launcher3/.Launcher<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10200000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.android.flysilkworm/.app.activity.FrameworkActivity<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10200000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.android.settings/.Settings<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token assign-left variable">intent</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10800000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>io.appium.settings/.Settings<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>其中 cmp=tv.danmaku.bili/.MainActivityV2 就是 / 之前是包名（appPackage），之后是 appActivity</p></li><li><p>方案二：如果是已有 apk 在电脑上</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>aapt dump badging D:<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>软测<span class="token punctuation">\</span>iBiliPlayer-bili.apk <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">"package"</span></pre></td></tr></table></figure><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>aapt dump badging D<span class="token punctuation">:</span>\Desktop\软测\iBiliPlayer<span class="token operator">-</span>bili<span class="token punctuation">.</span>apk <span class="token operator">|</span> find <span class="token string">"launchable-activity"</span></pre></td></tr></table></figure><p>会出现如下信息：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">1</span>、</pre></td></tr><tr><td data-num="2"></td><td><pre>C:<span class="token punctuation">\</span>WINDOWS<span class="token punctuation">\</span>System3<span class="token operator"><span class="token file-descriptor important">2</span>></span>aapt dump badging D:<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>软测<span class="token punctuation">\</span>iBiliPlayer-bili.apk <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">"package"</span></pre></td></tr><tr><td data-num="3"></td><td><pre>package: <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'tv.danmaku.bili'</span> <span class="token assign-left variable">versionCode</span><span class="token operator">=</span><span class="token string">'6430500'</span> <span class="token assign-left variable">versionName</span><span class="token operator">=</span><span class="token string">'6.43.0'</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token number">2</span>、 </pre></td></tr><tr><td data-num="5"></td><td><pre>C:<span class="token punctuation">\</span>WINDOWS<span class="token punctuation">\</span>System3<span class="token operator"><span class="token file-descriptor important">2</span>></span>aapt dump badging D:<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>软测<span class="token punctuation">\</span>iBiliPlayer-bili.apk <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">"launchable-activity"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>launchable-activity: <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'tv.danmaku.bili.MainActivityV2'</span>  <span class="token assign-left variable">label</span><span class="token operator">=</span><span class="token string">''</span> <span class="token assign-left variable">icon</span><span class="token operator">=</span><span class="token string">''</span></pre></td></tr></table></figure><p>1、的 name 是包名，2、的 name 是 appActivity（tv.danmaku.bili.MainActivityV2，</p><p>可以省略 tv.danmaku.bili）</p></li><li><p>方案三：算是方案一的进阶吧 (推荐)</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell dumpsys window w <span class="token operator">|</span>findstr <span class="token punctuation">\</span>/ <span class="token operator">|</span>findstr <span class="token assign-left variable">name</span><span class="token operator">=</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># 或者</span></pre></td></tr><tr><td data-num="3"></td><td><pre>adb shell dumpsys activity activities <span class="token operator">|</span> findstr mFocusedActivity</pre></td></tr></table></figure></li></ul><h2 id="在ui-automator-viewerbat中运行一次python就连不上的问题"><a class="anchor" href="#在ui-automator-viewerbat中运行一次python就连不上的问题">#</a> 在 UI Automator Viewer.bat 中运行一次 Python 就连不上的问题：</h2><p><strong>特别提示：如果按照 Python 模板写，按 q 退出可以避免连不上的问题，相关代码如下</strong></p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>q <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">'input q to quit'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">if</span> q <span class="token operator">==</span> <span class="token string">'q'</span><span class="token builtin class-name">:</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    driver.quit<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>方案一：重启模拟器</p><p>方案二：重启 adb（推荐方案二，因为方案一很慢 (￣_￣|||)）</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb kill-server <span class="token operator">&amp;</span> adb start-server</pre></td></tr></table></figure><p>方案三：appium 重连（原因：运行后 appium 占用指定端口与本身需要的端口冲突导致）</p><h2 id="python中测试基本语法"><a class="anchor" href="#python中测试基本语法">#</a> <strong>Python 中测试基本语法</strong>：</h2><p>参考语法文档：<span class="exturl" data-url="aHR0cDovL3d3dy5ieWh5Lm5ldC90dXQvYXV0by9hcHBpdW0vMDIv">http://www.byhy.net/tut/auto/appium/02/</span></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 根据 id</span></pre></td></tr><tr><td data-num="2"></td><td><pre>driver<span class="token punctuation">.</span>find_elements_by_id<span class="token punctuation">(</span><span class="token string">"android:id/button2"</span><span class="token punctuation">)</span> <span class="token comment">#既可以找多个元素也可以找单个元素</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 点击事件</span></pre></td></tr><tr><td data-num="4"></td><td><pre>driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"cn.xuexi.android:id/comm_head_xuexi_score"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># tap 点按（bounds 属性，停留的时间）</span></pre></td></tr><tr><td data-num="6"></td><td><pre>driver<span class="token punctuation">.</span>tap<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">850</span><span class="token punctuation">,</span><span class="token number">1080</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 发送文字事件（resource-id）</span></pre></td></tr><tr><td data-num="8"></td><td><pre>sbox <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'search_src_text'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>sbox<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'Doyoudo'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>driver<span class="token punctuation">.</span>press_keycode<span class="token punctuation">(</span>AndroidKey<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 根据 class 元素</span></pre></td></tr><tr><td data-num="12"></td><td><pre>driver<span class="token punctuation">.</span>find_elements_by_class_name<span class="token punctuation">(</span><span class="token string">'android.widget.TextView'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># 根据 ACCESSIBILITY ID（content-desc 属性）</span></pre></td></tr><tr><td data-num="14"></td><td><pre>driver<span class="token punctuation">.</span>find_element_by_accessibility_id<span class="token punctuation">(</span><span class="token string">'找人'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment"># 根据 Xpath</span></pre></td></tr><tr><td data-num="16"></td><td><pre>driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//ele1/ele2[@attr="value"]'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># 模拟滑动</span></pre></td></tr><tr><td data-num="19"></td><td><pre>driver<span class="token punctuation">.</span>swipe<span class="token punctuation">(</span>start_x<span class="token operator">=</span>x<span class="token punctuation">,</span> start_y<span class="token operator">=</span>y1<span class="token punctuation">,</span> end_x<span class="token operator">=</span>x<span class="token punctuation">,</span> end_y<span class="token operator">=</span>y2<span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">800</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># 按键</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment"># 输入回车键，确定搜索</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    driver<span class="token punctuation">.</span>press_keycode<span class="token punctuation">(</span>AndroidKey<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment"># 返回</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    driver<span class="token punctuation">.</span>press_keycode<span class="token punctuation">(</span>AndroidKey<span class="token punctuation">.</span>BACK<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment"># 隐式等待 设置缺省等待 10 秒时间（不推荐）</span></pre></td></tr><tr><td data-num="27"></td><td><pre>driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment"># 强制等待 等 5 秒（推荐）</span></pre></td></tr><tr><td data-num="29"></td><td><pre>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment"># 显示等待 (有点多直接看链接吧)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>https<span class="token punctuation">:</span><span class="token operator">//</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>sinat_41774836<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">88965281</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment"># 打开通知栏，返回直接 BACK 键</span></pre></td></tr><tr><td data-num="33"></td><td><pre>driver<span class="token punctuation">.</span>open_notifications<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment"># 截屏手机，并且下载到指定目录中</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">import</span> os</pre></td></tr><tr><td data-num="36"></td><td><pre>os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'adb shell screencap /sdcard/screen3.png &amp;&amp; adb pull /sdcard/screen3.png'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Asaasa1/article/details/109383652"><strong>关于 TouchAction 类与 MultiAction 类的相关用法</strong></a> (九宫格解锁可以用 touchaction)</p><p><strong>联合查询:</strong></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># xpath 方式： 可以联合 @resource-id 属性和 @text 文本属性来下定位</span></pre></td></tr><tr><td data-num="2"></td><td><pre>driver<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">"//*[@resource-id='com.taobao.taobao:id/tv_scan_text'][@text='扫一扫']"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 内嵌 Java 方式： 后面可以一直.name () 这种方式添加（调用 UI Automator API 的 java 代码，实现最为直接的自动化控制。）</span></pre></td></tr><tr><td data-num="5"></td><td><pre>code <span class="token operator">=</span> <span class="token string">'new UiSelector().text("追番").resourceId("tv.danmaku.bili:id/tab_title")'</span></pre></td></tr><tr><td data-num="6"></td><td><pre>ele <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_android_uiautomator<span class="token punctuation">(</span>code<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>ele<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment"># 具体 java 代码 来自谷歌 Android 文档：</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    https<span class="token punctuation">:</span><span class="token operator">//</span>developer<span class="token punctuation">.</span>android<span class="token punctuation">.</span>google<span class="token punctuation">.</span>cn<span class="token operator">/</span>training<span class="token operator">/</span>testing<span class="token operator">/</span>ui<span class="token operator">-</span>automator</pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">#常用列表</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        text<span class="token punctuation">(</span>String<span class="token punctuation">)</span>         <span class="token comment"># 对应 text</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        resourceId<span class="token punctuation">(</span>String<span class="token punctuation">)</span>   <span class="token comment"># 对应 resource-id</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        description<span class="token punctuation">(</span>String<span class="token punctuation">)</span>  <span class="token comment"># 对应 content-desc</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        className<span class="token punctuation">(</span>String<span class="token punctuation">)</span>    <span class="token comment"># 对应 class</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        index<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>           <span class="token comment"># 对应 index</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        instance<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>        <span class="token comment"># 是匹配的结果所有元素里面的第几个元素</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        textContains<span class="token punctuation">(</span>String<span class="token punctuation">)</span> <span class="token comment"># 根据文本包含什么字符串 (与 text 连用)</span></pre></td></tr></table></figure><p><strong>注：</strong></p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>ele <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_android_uiautomator<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token string">'new UiSelector(). className(" android.widget. TextView"). textContains("白月黑羽").instance(4)'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>text<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>等同于下方代码</pre></td></tr><tr><td data-num="6"></td><td><pre>eles <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements_by_android_uiautomator<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token string">'new UiSelector(). className("android.widget. TextView"). textContains("白月黑羽")'</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>eles<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="python基础模板python的第三方库appium-python-client"><a class="anchor" href="#python基础模板python的第三方库appium-python-client">#</a> <strong>Python 基础模板</strong>（Python 的第三方库 appium-python-client）</h2><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> appium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>extensions<span class="token punctuation">.</span>android<span class="token punctuation">.</span>nativekey <span class="token keyword">import</span> AndroidKey</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>desired_caps <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token string">'platformName'</span><span class="token punctuation">:</span> <span class="token string">'Android'</span><span class="token punctuation">,</span> <span class="token comment"># 被测手机是安卓</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token string">'platformVersion'</span><span class="token punctuation">:</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token comment"># 手机安卓版本</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token string">'deviceName'</span><span class="token punctuation">:</span> <span class="token string">'HUAWEI'</span><span class="token punctuation">,</span> <span class="token comment"># 设备名，安卓手机可以随意填写</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string">'appPackage'</span><span class="token punctuation">:</span> <span class="token string">'tv.danmaku.bili'</span><span class="token punctuation">,</span> <span class="token comment"># 启动 APP Package 名称</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token string">'appActivity'</span><span class="token punctuation">:</span> <span class="token string">'.MainActivityV2'</span><span class="token punctuation">,</span> <span class="token comment"># 启动 Activity 名称</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token string">'unicodeKeyboard'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># 使用自带输入法，输入中文时填 True</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token string">'resetKeyboard'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># 执行完程序恢复原来输入法</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token string">'noReset'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>       <span class="token comment"># 不要重置 App</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token string">'newCommandTimeout'</span><span class="token punctuation">:</span> <span class="token number">6000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token string">'automationName'</span> <span class="token punctuation">:</span> <span class="token string">'UiAutomator2'</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment"># 'app': r'd:\apk\bili.apk',</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">try</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment"># 连接 Appium Server，初始化自动化环境</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">'http://localhost:4723/wd/hub'</span><span class="token punctuation">,</span> desired_caps<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment"># 设置缺省等待时间</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    driver<span class="token punctuation">.</span>implicitly_wait<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment"># 青少年保护</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    iknow <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements_by_id<span class="token punctuation">(</span><span class="token string">"text3"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">if</span> iknow<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        iknow<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">"expand_search"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    sbox <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span><span class="token string">'search_src_text'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    sbox<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">'Doyoudo'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    driver<span class="token punctuation">.</span>press_keycode<span class="token punctuation">(</span>AndroidKey<span class="token punctuation">.</span>ENTER<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    eles <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_elements_by_id<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">for</span> ele <span class="token keyword">in</span> eles<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token keyword">print</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>text<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    ele<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>    q <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'input q to quit'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">if</span> q <span class="token operator">==</span> <span class="token string">'q'</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token keyword">except</span> Exception <span class="token keyword">as</span> err<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'An exception happened: '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    q <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'error q to quit'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">if</span> q <span class="token operator">==</span> <span class="token string">'q'</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="自定义python模板"><a class="anchor" href="#自定义python模板">#</a> 自定义 Python 模板</h2><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">import</span> <span class="token function">time</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>from appium <span class="token function">import</span> webdriver</pre></td></tr><tr><td data-num="4"></td><td><pre>from appium.webdriver.common.touch_action <span class="token function">import</span> TouchAction</pre></td></tr><tr><td data-num="5"></td><td><pre>from appium.webdriver.extensions.android.nativekey <span class="token function">import</span> AndroidKey</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>desired_caps <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token string">'platformName'</span><span class="token builtin class-name">:</span> <span class="token string">'Android'</span>,</pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token string">'platformVersion'</span><span class="token builtin class-name">:</span> <span class="token string">'7'</span>,</pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token string">'deviceName'</span><span class="token builtin class-name">:</span> <span class="token string">'HUAWEI'</span>,</pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token string">'appPackage'</span><span class="token builtin class-name">:</span> <span class="token string">'tv.danmaku.bili'</span>,  <span class="token comment"># adb shell dumpsys activity activities | findstr mFocusedActivity</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token string">'appActivity'</span><span class="token builtin class-name">:</span> <span class="token string">'.MainActivityV2'</span>,  <span class="token comment"># 启动 Activity 名称</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token string">'unicodeKeyboard'</span><span class="token builtin class-name">:</span> True,</pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token string">'resetKeyboard'</span><span class="token builtin class-name">:</span> True,</pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token string">'noReset'</span><span class="token builtin class-name">:</span> True,</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token string">'newCommandTimeout'</span><span class="token builtin class-name">:</span> <span class="token number">6000</span>,</pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token string">'automationName'</span><span class="token builtin class-name">:</span> <span class="token string">'UiAutomator2'</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>def id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token builtin class-name">return</span> driver.find_element_by_id<span class="token punctuation">(</span>a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>def ids<span class="token punctuation">(</span>a<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token builtin class-name">return</span> driver.find_elements_by_id<span class="token punctuation">(</span>a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>def xpath<span class="token punctuation">(</span>a<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token builtin class-name">return</span> driver.find_element_by_xpath<span class="token punctuation">(</span>a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>def xpaths<span class="token punctuation">(</span>a<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token builtin class-name">return</span> driver.find_elements_by_xpath<span class="token punctuation">(</span>a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>def desc<span class="token punctuation">(</span>a<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token builtin class-name">return</span> driver.find_element_by_accessibility_id<span class="token punctuation">(</span>a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>def class_names<span class="token punctuation">(</span>a<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token builtin class-name">return</span> driver.find_elements_by_class_name<span class="token punctuation">(</span>a<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>def tap<span class="token punctuation">(</span>a, b, c, d<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token builtin class-name">return</span> driver.tap<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span>a, b<span class="token punctuation">)</span>, <span class="token punctuation">(</span>c, d<span class="token punctuation">)</span><span class="token punctuation">]</span>, <span class="token number">100</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>def back<span class="token punctuation">(</span><span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="42"></td><td><pre>    driver.press_keycode<span class="token punctuation">(</span>AndroidKey<span class="token punctuation">(</span><span class="token punctuation">)</span>.BACK<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>def enter<span class="token punctuation">(</span><span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="45"></td><td><pre>    driver.press_keycode<span class="token punctuation">(</span>AndroidKey<span class="token punctuation">(</span><span class="token punctuation">)</span>.ENTER<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>def move<span class="token punctuation">(</span>x, y, m, n<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="48"></td><td><pre>    driver.swipe<span class="token punctuation">(</span>start_x<span class="token operator">=</span>x, <span class="token assign-left variable">start_y</span><span class="token operator">=</span>y, <span class="token assign-left variable">end_x</span><span class="token operator">=</span>m, <span class="token assign-left variable">end_y</span><span class="token operator">=</span>n, <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token number">800</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>def long_press<span class="token punctuation">(</span>el1, el2<span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="51"></td><td><pre>    action <span class="token operator">=</span> TouchAction<span class="token punctuation">(</span>driver<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    action.long_press<span class="token punctuation">(</span>el1<span class="token punctuation">)</span>.move_to<span class="token punctuation">(</span>el2<span class="token punctuation">)</span>.release<span class="token punctuation">(</span><span class="token punctuation">)</span>.perform<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>try:</pre></td></tr><tr><td data-num="55"></td><td><pre>    driver <span class="token operator">=</span> webdriver.Remote<span class="token punctuation">(</span><span class="token string">'http://localhost:4723/wd/hub'</span>, desired_caps<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre>    driver.implicitly_wait<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    time.sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>    q <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">'input q to quit\n'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token keyword">if</span> q <span class="token operator">==</span> <span class="token string">'q'</span><span class="token builtin class-name">:</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        driver.quit<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="63"></td><td><pre>except Exception as err:</pre></td></tr><tr><td data-num="64"></td><td><pre>    print<span class="token punctuation">(</span><span class="token string">'An exception happened: '</span> + str<span class="token punctuation">(</span>err<span class="token punctuation">))</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    q <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">'error q to quit'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token keyword">if</span> q <span class="token operator">==</span> <span class="token string">'q'</span><span class="token builtin class-name">:</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        driver.quit<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="appium测试ui界面模板就是python中的desired_caps注这里内部必须都为双引号"><a class="anchor" href="#appium测试ui界面模板就是python中的desired_caps注这里内部必须都为双引号">#</a> appium 测试 ui 界面模板 (就是 python 中的 desired_caps）<strong>注：这里内部必须都为双引号</strong></h2><figure class="highlight json"><figcaption data-lang="JSON"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token property">"platformName"</span><span class="token operator">:</span> <span class="token string">"Android"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token property">"platformVersion"</span><span class="token operator">:</span> <span class="token string">"57"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token property">"deviceName"</span><span class="token operator">:</span> <span class="token string">"HUAWEI"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token property">"appPackage"</span><span class="token operator">:</span> <span class="token string">"cn.xuexi.android"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token property">"appActivity"</span><span class="token operator">:</span> <span class="token string">"com.alibaba.android.rimet.biz.SplashActivity"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token property">"unicodeKeyboard"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token property">"resetKeyboard"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token property">"noReset"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token property">"newCommandTimeout"</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token property">"automationName"</span><span class="token operator">:</span> <span class="token string">"UiAutomator2"</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="adb基本命令"><a class="anchor" href="#adb基本命令">#</a> adb 基本命令</h2><ul><li><p><strong>先附上参考文档：</strong></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cud2FuYW5kcm9pZC5jb20vYmxvZy9zaG93LzIzMTA=">https://www.wanandroid.com/blog/show/2310</span></p></li><li><p><strong>查看当前连接设备</strong></p><p><code>adb devices</code></p></li><li><p><strong>如果发现多个设备</strong></p><p><code>adb -s 设备号 其他指令</code></p></li><li><p><strong>查看顶部 Activity</strong></p><ul><li><p>windows 环境下:</p><p><code>adb shell dumpsys activity | findstr &quot;mFocusedActivity&quot;</code></p></li><li><p>Linux、Mac 环境下：</p><p><code>adb shell dumpsys activity | grep &quot;mFocusedActivity&quot;</code></p></li></ul></li><li><p><strong>查看日志</strong></p><p><code>adb logcat</code></p></li><li><p><strong>安装 apk 文件</strong></p><p><code>adb install xxx.apk</code></p><p>推荐使用覆盖安装:</p><p><code>adb install -r xxx.apk</code></p></li><li><p><strong>卸载 App</strong></p><p><code>adb uninstall com.zhy.app</code></p><p>如果想要保留数据，则</p><p><code>adb uninstall -k com.zhy.app</code></p></li><li><p><strong>传递文件</strong></p><ul><li><p>往手机 SDCard 传递文件</p><p><code>adb push 文件名 手机端SDCard路径</code></p></li><li><p>从手机端下载文件</p><p><code>adb pull /sdcard/xxx.txt</code></p></li></ul></li><li><p><strong>启动 Activity</strong></p><p><code>adb shell am start 包名/完整Activity路径</code></p></li><li><p><strong>清除 APP 数据</strong></p><p><code>adb shell pm clear com.example.packagename</code></p><p><strong>注：该命令清除掉 APP 的缓存，还能把 APP 的数据给清空</strong></p></li><li><p><strong>查看所有 App 的名称</strong></p><p><code>adb shell pm list packages</code></p><p>注：该命令可以查看手机上的 APP 名称。可以在后面加上 -f ，这样还能显示该 APP 的路径，即： <code>adb shell pm list packages -f</code> 或者 <code>adb shell pm path &lt;PACKAGE&gt;</code></p><p><strong>列出第三方应用</strong>： <code>adb shell pm list packages -3</code></p></li></ul><div class="tags"><a href="/tags/Python/" rel="tag"><i class="ic i-tag"></i> Python</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-10-24 14:35:58" itemprop="dateModified" datetime="2023-10-24T14:35:58+08:00">2023-10-24</time> </span><span id="Note/移动应用测试/" class="item leancloud_visitors" data-flag-title="移动应用测试" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="obsidianlyg 微信支付"><p>微信支付</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>obsidianlyg <i class="ic i-at"><em>@</em></i>L 小悠的日常 L</li><li class="link"><strong>本文链接：</strong> <a href="https://obsidianlyg.github.io/Note/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95/" title="移动应用测试">https://obsidianlyg.github.io/Note/移动应用测试/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Arch/Arch/WallPaper/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;t3.picb.cc&#x2F;2023&#x2F;06&#x2F;15&#x2F;IXzzfF.jpg" title="壁纸网站"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> arch 个人笔记</span><h3>壁纸网站</h3></a></div><div class="item right"><a href="/Note/redis%E5%85%A5%E9%97%A8/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;t3.picb.cc&#x2F;2023&#x2F;06&#x2F;15&#x2F;IXDVvD.jpg" title="redis入门"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>redis入门</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95"><span class="toc-number">1.</span> <span class="toc-text">移动应用测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%8C%85%E5%90%8D"><span class="toc-number">1.1.</span> <span class="toc-text">查看包名：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8ui-automator-viewerbat%E4%B8%AD%E8%BF%90%E8%A1%8C%E4%B8%80%E6%AC%A1python%E5%B0%B1%E8%BF%9E%E4%B8%8D%E4%B8%8A%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.</span> <span class="toc-text">在 UI Automator Viewer.bat 中运行一次 Python 就连不上的问题：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python%E4%B8%AD%E6%B5%8B%E8%AF%95%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">Python 中测试基本语法：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BFpython%E7%9A%84%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93appium-python-client"><span class="toc-number">1.4.</span> <span class="toc-text">Python 基础模板（Python 的第三方库 appium-python-client）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89python%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.5.</span> <span class="toc-text">自定义 Python 模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#appium%E6%B5%8B%E8%AF%95ui%E7%95%8C%E9%9D%A2%E6%A8%A1%E6%9D%BF%E5%B0%B1%E6%98%AFpython%E4%B8%AD%E7%9A%84desired_caps%E6%B3%A8%E8%BF%99%E9%87%8C%E5%86%85%E9%83%A8%E5%BF%85%E9%A1%BB%E9%83%BD%E4%B8%BA%E5%8F%8C%E5%BC%95%E5%8F%B7"><span class="toc-number">1.6.</span> <span class="toc-text">appium 测试 ui 界面模板 (就是 python 中的 desired_caps）注：这里内部必须都为双引号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#adb%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-number">1.7.</span> <span class="toc-text">adb 基本命令</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="obsidianlyg" data-src="/images/avatar.jpg"><p class="name" itemprop="name">obsidianlyg</p><div class="description" itemprop="description">最好的生活是：时光，浓淡相宜，人心，远近相安</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">36</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">8</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">12</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL29ic2lkaWFubHln" title="https:&#x2F;&#x2F;github.com&#x2F;obsidianlyg"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9jYW4tbmlhbi0zMQ==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;can-nian-31"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTYwNDc3MDA3NQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;604770075"><i class="ic i-cloud-music"></i></span> <span class="exturl item about" data-url="aHR0cDovL29ic2lzaWFubHlnLnRvcC9hYm91dA==" title="http:&#x2F;&#x2F;obsisianlyg.top&#x2F;about"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjg3OTE0Mjk2NEBxcS5jb20=" title="mailto:879142964@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/bb/" rel="section"><i class="ic i-heart"></i>哔哔</a></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-magic"></i>友链</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/Arch/Arch/WallPaper/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/Note/redis%E5%85%A5%E9%97%A8/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/usetest/" title="分类于 使用测试">使用测试</a> <i class="ic i-angle-right"></i> <a href="/categories/usetest/mktest/" title="分类于 markdown 测试">markdown 测试</a></div><span><a href="/usetest/mktest/elements/" title="Elements">Elements</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/usetest/" title="分类于 使用测试">使用测试</a> <i class="ic i-angle-right"></i> <a href="/categories/usetest/mktest/" title="分类于 markdown 测试">markdown 测试</a></div><span><a href="/usetest/mktest/markdown/" title="Markdown Style test">Markdown Style test</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Note/Ubuntu%E6%8D%A2%E6%BA%90/" title="Ubuntu笔记">Ubuntu笔记</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/about/" title="关于个人">关于个人</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/usetest/" title="分类于 使用测试">使用测试</a> <i class="ic i-angle-right"></i> <a href="/categories/usetest/mktest/" title="分类于 markdown 测试">markdown 测试</a></div><span><a href="/usetest/mktest/videos/" title="Videos">Videos</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Note/SpringBoot%E4%B8%8B%E4%BD%BF%E7%94%A8Quartz%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" title="SpringBoot下使用Quartz设置定时任务">SpringBoot下使用Quartz设置定时任务</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/note/" title="分类于 主题作者的教程配置">主题作者的教程配置</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/note/theme-shoka-doc/" title="分类于 Theme Shoka Documentation">Theme Shoka Documentation</a></div><span><a href="/computer-science/note/theme-shoka-doc/config/" title="Step.2 基本配置">Step.2 基本配置</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Note/%E9%80%9A%E8%BF%87Java%E5%AF%BC%E5%85%A5Excel/" title="利用Java导入Excel到数据库">利用Java导入Excel到数据库</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/usetest/" title="分类于 使用测试">使用测试</a> <i class="ic i-angle-right"></i> <a href="/categories/usetest/mktest/" title="分类于 markdown 测试">markdown 测试</a></div><span><a href="/usetest/mktest/tag-plugins/" title="Tag Plugins">Tag Plugins</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/note/" title="分类于 主题作者的教程配置">主题作者的教程配置</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/note/theme-shoka-doc/" title="分类于 Theme Shoka Documentation">Theme Shoka Documentation</a></div><span><a href="/computer-science/note/theme-shoka-doc/display/" title="Step.3 界面显示">Step.3 界面显示</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2021 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">obsidianlyg @ Obsidianlyg's Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">109k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">1:40</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span><br></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"Note/移动应用测试/",favicon:{show:"（●´3｀●）怎么才来",hide:"(´Д｀)人没了！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>